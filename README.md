# Машинное обучение (ml)
Здесь собраны решения различных задач по машинному обучению. Задачи сгруппированы по методам решения.
## Линейная регрессия 
### Рассчитать данные по энергопотреблению (01_energy_consumption)
* Постановка
  * Загрузите данные и посчитайте модели линейной регрессии для 50 зданий по ансамблю регрессионных моделей: в первой модели весь оптимальный набор метеорологических данных, во второй - дни недели и праздники, в третьей - недели года, в четвертой - месяцы. Финальное значение показателя рассчитайте как взвешенное арифметическое показателей всех моделей, взяв веса для первой и второй модели как 3/8, а для третьей и четвертой - как 1/8.
  * Загрузите данные решения, посчитайте значение энергопотребления для требуемых дат для тех зданий, которые посчитаны в модели, и выгрузите результат в виде CSV-файла (submission.csv).
# Продвинутый Python
Здесь представлены продвинутые возможности Python для решения задач по анализу данных.

Задания сгруппированы по следующим темам:
* Анализ данных
* Импорт и парсинг данных
* Визуализация данных
* Отчеты и автоматизация

## Анализ данных (data_analysis)
### Задание: Данные из нескольких источников
* Постановка
  * Получите данные по безработице в Москве:
https://video.ittensive.com/python-advanced/data-9753-2019-07-25.utf.csv
Объедините эти данные индексами (Месяц/Год) с данными из предыдущего задания (вызовы пожарных) для Центральный административный округ:
https://video.ittensive.com/python-advanced/data-5283-2019-10-04.utf.csv
Найдите значение поля UnemployedMen в том месяце, когда было меньше всего вызовов в Центральном административном округе.
* Решение
  * Выберем и объединим данные с помощью pandas
  * С помощью сортировки найдем требуемую информацию
### Задание: Выделение данных
* Постановка
  * Получите данные по безработице в Москве:
https://video.ittensive.com/python-advanced/data-9753-2019-07-25.utf.csv
Найдите, с какого года процент людей с ограниченными возможностями (UnemployedDisabled) среди всех безработных (UnemployedTotal) стал меньше 2%.
* Решение
  * Выберем данные с помощью pandas
  * С помощью фильтрации и сортировки найдем требуемую информацию
### Задание: Предсказание безработицы
* Постановка 
  * Возьмите данные по безработице в городе Москва: video.ittensive.com/python-advanced/data-9753-2019-07-25.utf.csv Сгруппируйте данные по годам, и, если в году меньше 6 значений, отбросьте эти годы. Постройте модель линейной регрессии по годам среднего значения отношения UnemployedDisabled к UnemployedTotal (процента людей с ограниченными возможностями) за месяц и ответьте, 
	какое ожидается значение процента безработных инвалидов в 2020 году при сохранении текущей политики города Москвы?
* Решение
  * Преобразуем данные средствами pandas
  * Используем модель линейной регрессии sklearn.linear_model.LinearRegression

## Импорт и парсинг данных (data_import_parsing)
### Задание: Получение данных по API
* Постановка
  * Выполните запрос к API Геокодера Яндекса и узнайте долготу точки на карте для города Самара.
* Решение
  * Выполним запрос по городу, ответ получим в формате json. Далле согласно структуре ответа получим требуемую информацию 
### Задание: Получение котировок акций
* Постановка
  * Получите данные по котировкам акций со страницы: mfd.ru/marketdata/?id=5&group=16&mode=3&sortHeader=name&sortOrder=1&selectedDate=01.11.2019 и найдите, по какому тикеру был максимальный рост числа сделок (в процентах) за 1 ноября 2019 года.
* Решение
  * Получим данные в формате HTML и преобразуем в pandas DataFrame. Далее с помощью сортировки получим требуемую информацию.
### Задание: Парсинг интернет магазина
* Постановка
  * Используя парсинг данных с маркетплейса beru.ru, найдите, на сколько литров отличается общий объем холодильников Саратов 263 и Саратов 452?
Для парсинга можно использовать зеркало страницы beru.ru с результатами для холодильников Саратов по адресу:
video.ittensive.com/data/018-python-advanced/beru.ru/
* Решение
  * Получим данные в HTML формате. По структуре HTML найдем требуемую информацию. 
### Задание: Загрузка результатов в бд
* Постановка
  * Соберите данные о моделях холодильников Саратов с маркетплейса beru.ru: URL, название, цена, размеры, общий объем, объем холодильной камеры.
Создайте соответствующие таблицы в SQLite базе данных и загрузите полученные данные в таблицу beru_goods.
Для парсинга можно использовать зеркало страницы beru.ru с результатами для холодильников Саратов по адресу:
video.ittensive.com/data/018-python-advanced/beru.ru/
* Решение
  * Создадим таблицу в бд
  * Получим ссылки на страницы с требуемой информацией
  * Соберем все необходимые данные по подготовленным ссылкам 
  * Добавим данные в таблицу

## Визуализация данных (data_visualization)
### Задание: Тип визуализации данных
* Постановка
  * Загрузите данные по ЕГЭ за последние годы
https://video.ittensive.com/python-advanced/data-9722-2019-10-14.utf.csv
выберите данные за 2018-2019 учебный год.
Выберите тип диаграммы для отображения результатов по административному округу Москвы, постройте выбранную диаграмму для количества школьников, написавших ЕГЭ на 220 баллов и выше.
Выберите тип диаграммы и постройте ее для районов Северо-Западного административного округа Москвы для количества школьников, написавших ЕГЭ на 220 баллов и выше.
* Решение
  * Результаты по административному округу представим в виде вертикальной столбчатой диаграммы
  * Результаты по Северо-Западному административному округу представим в виде круговой диаграммы
### Задание: Определение зависимостей в результатах по марафону
* Постановка
  * Загрузите данные по итогам марафона
https://video.ittensive.com/python-advanced/marathon-data.csv
Приведите время половины и полной дистанции к секундам.
Найдите, данные каких серии данных коррелируют (используя диаграмму pairplot в Seaborn).
Найдите коэффициент корреляции этих серий данных, используя scipy.stats.pearsonr.
Постройте график jointplot для коррелирующих данных. 
* Решение
  * Загрузим и отформатируем данные с помощью pandas
  * Построим диаграмму pairplot, по которой определим коррелирующие данные
  * Рассчитаем коэффициент корреляции Пирсона с помощью scipy.stats и построим диаграмму joinplot 
### Задание: Визуализация графиков акций
* Постановка
  * Используя данные индекса РТС за последние годы
https://video.ittensive.com/python-advanced/rts-index.csv
постройте отдельные графики закрытия (Close) индекса по дням за 2017, 2018, 2019 годы в единой оси X.
Добавьте на график экспоненциальное среднее за 20 дней для значения Max за 2017 год.
Найдите последнюю дату, когда экспоненциальное среднее максимального дневного значения (Max) в 2017 году было больше, чем соответствующее значение Close в 2019 году (это последнее пересечение графика за 2019 год и графика для среднего за 2017 год).
* Решение
  * Загрузим и отформатируем данные с помощью pandas
  * Подготовим нужные выборки и найдем требуемую информацию
### Задание: Объекты культурного наследия России
* Постановка
  * Изучите набор данных по объектам культурного наследия России (в виде gz-архива):
https://video.ittensive.com/python-advanced/data-44-structure-4.csv.gz
и постройте фоновую картограмму по количеству объектов в каждом регионе России, используя гео-данные
https://video.ittensive.com/python-advanced/russia.json
Выведите для каждого региона количество объектов в нем.
Посчитайте число объектов культурного наследия в Татарстане.
* Решение
  * Предварительно скачаем данные, из-за большого объема
  * После объединения наборов данных определеим несоответствия названий регионов и исправим их
  * Сформируем график и добавим подписи, используя координаты региона 

## Отчеты и автоматизация (reports_n_automation)
### Задание: Сборка PDF документа
* Постановка
  * Используя данные по посещаемости библиотек в районах Москвы
https://video.ittensive.com/python-advanced/data-7361-2019-11-28.utf.json
постройте круговую диаграмму суммарной посещаемости (NumOfVisitors) 20 наиболее популярных районов Москвы.
Создайте PDF отчет, используя файл
https://video.ittensive.com/python-advanced/title.pdf
как первую страницу. На второй странице выведите итоговую диаграмму, самый популярный район Москвы и число посетителей библиотек в нем.
Сколько посетителей библиотек в районе Москвы с самой.
* Решение
  * Скачаем и преобразуем данные с помощью pandas
  * Сформируем требуемый график и сохраним в формате png
  * Сформируем отчет в формате pdf с помощью reportlab
  * Сформируем финальный отчет, объединив титульный лист и отчет
### Задание: Геральдические символы Москвы
* Постановка
  * Сгенерируйте PDF документ из списка флагов и гербов районов Москвы:
https://video.ittensive.com/python-advanced/data-102743-2019-11-13.utf.csv
На каждой странице документа выведите название геральдического символа (Name), его описание (Description) и его изображение (Picture).
Для показа изображений используйте адрес
https://op.mos.ru/MEDIA/showFile?id=XXX
где XXX - это значение поля Picture в наборе данных. Например:
https://op.mos.ru/MEDIA/showFile?id=8466da35-6801-41a9-a71e-04b60408accb
* Решение
  * Выберем нужные данные с помощью pandas
  * Сформируем отчет в HTML формате
  * Сгенерируем PDF отчет на основе сформированного HTML отчета с помощью wkhtmltopdf 
### Задание: Многостраничный отчет
* Постановка
  * Используя данные по активностям в парках Москвы
https://video.ittensive.com/python-advanced/data-107235-2019-12-02.utf.json
Создайте PDF отчет, в котором выведите:
1. Диаграмму распределения числа активностей по паркам, топ10 самых активных
2. Таблицу активностей по всем паркам в виде Активность-Расписание-Парк
* Решение
  * Выберем нужные данные с помощью pandas
  * Подготовим требуемый график и преобразуем его в бинарный вид с помощью binascii
  * Подготовим HTML шаблон для генерации PDF отчета
  * Сформируем PDF отчет по созданному шаблону с помощью wkhtmltopdf
### Задание: Автоматический отчет
* Постановка
  * Соберите отчет по результатам ЕГЭ в 2018-2019 году, используя данные
https://video.ittensive.com/python-advanced/data-9722-2019-10-14.utf.csv
и отправьте его в HTML формате по адресу support@ittensive.com, используя только Python.
В отчете должно быть:
общее число отличников (учеников, получивших более 220 баллов по ЕГЭ в Москве),
распределение отличников по округам Москвы,
название школы с лучшими результатами по ЕГЭ в Москве.
Диаграмма распределения должна быть вставлена в HTML через data:URI формат (в base64-кодировке).
Дополнительно: приложите к отчету PDF документ того же содержания (дублирующий письмо).
* Решение
  * Выберем нужные данные с помощью pandas
  * Подготовим требуемый график и преобразуем его в бинарный вид с помощью binascii
  * Подготовим отчет в HTML формате
  * Сформируем PDF отчет по созданному HTML отчету с помощью wkhtmltopdf
  * Отправим сформированный HTML отчет по почте, приложив отчет в PDF формате 


## <Тема> (<папка>)
### Задание:
* Постановка
  * <Описание> 
* Решение
  * <Описание>
